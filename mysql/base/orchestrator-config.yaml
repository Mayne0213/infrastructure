apiVersion: v1
kind: ConfigMap
metadata:
  name: orchestrator-config
  namespace: mysql
data:
  orchestrator.conf.json: |
    {
      "Debug": true,
      "ListenAddress": ":3000",
      "MySQLTopologyUser": "orchestrator",
      "MySQLTopologyPassword": "changeme-orchestrator-password",
      "MySQLTopologyCredentialsConfigFile": "",
      "MySQLTopologySSLPrivateKeyFile": "",
      "MySQLTopologySSLCertFile": "",
      "MySQLTopologySSLCAFile": "",
      "MySQLTopologySSLSkipVerify": true,
      "MySQLTopologyUseMutualTLS": false,
      "BackendDB": "sqlite",
      "SQLite3DataFile": "/var/lib/orchestrator/orchestrator.db",
      "MySQLConnectTimeoutSeconds": 2,
      "DefaultInstancePort": 3306,
      "DiscoverByShowSlaveHosts": true,
      "InstancePollSeconds": 5,
      "UnseenInstanceForgetHours": 240,
      "SnapshotTopologiesIntervalHours": 0,
      "DiscoveryPollSeconds": 5,
      "InstanceBulkOperationsWaitTimeoutSeconds": 10,
      "ActiveNodeExpireSeconds": 60,
      "HostnameResolveMethod": "none",
      "MySQLHostnameResolveMethod": "none",
      "SkipBinlogServerUnresolveCheck": true,
      "ExpiryHostnameResolvesMinutes": 60,
      "RejectHostnameResolvePattern": "",
      "ReasonableReplicationLagSeconds": 10,
      "ProblemIgnoreHostnameFilters": [],
      "VerifyReplicationFilters": false,
      "ReasonableMaintenanceReplicationLagSeconds": 20,
      "CandidateInstanceExpireMinutes": 60,
      "AuditLogFile": "/var/lib/orchestrator/orchestrator-audit.log",
      "AuditToSyslog": false,
      "RemoveTextFromHostnameDisplay": ":3306",
      "ReadOnly": false,
      "AuthenticationMethod": "",
      "HTTPAuthUser": "",
      "HTTPAuthPassword": "",
      "AuthUserHeader": "",
      "PowerAuthUsers": ["*"],
      "ClusterNameToAlias": {},
      "DetectClusterAliasQuery": "SELECT SUBSTRING_INDEX(@@hostname, '-', 1)",
      "DetectClusterDomainQuery": "",
      "DetectInstanceAliasQuery": "",
      "DetectPromotionRuleQuery": "",
      "DataCenterPattern": "",
      "PhysicalEnvironmentPattern": "",
      "PromotionIgnoreHostnameFilters": [],
      "ServeAgentsHttp": false,
      "AgentsUseSSL": false,
      "AgentsUseMutualTLS": false,
      "AgentSSLSkipVerify": false,
      "AgentSSLPrivateKeyFile": "",
      "AgentSSLCertFile": "",
      "AgentSSLCAFile": "",
      "AgentSSLValidOUs": [],
      "UseSSL": false,
      "UseMutualTLS": false,
      "SSLSkipVerify": false,
      "SSLPrivateKeyFile": "",
      "SSLCertFile": "",
      "SSLCAFile": "",
      "SSLValidOUs": [],
      "URLPrefix": "",
      "StatusEndpoint": "/api/status",
      "StatusSimpleHealth": true,
      "StatusOUVerify": false,
      "AgentPollMinutes": 60,
      "UnseenAgentForgetHours": 6,
      "StaleSeedFailMinutes": 60,
      "SeedAcceptableBytesDiff": 8192,
      "PseudoGTIDPattern": "",
      "PseudoGTIDPatternIsFixedSubstring": false,
      "PseudoGTIDMonotonicHint": "asc:",
      "DetectPseudoGTIDQuery": "",
      "BinlogEventsChunkSize": 10000,
      "SkipBinlogEventsContaining": [],
      "ReduceReplicationAnalysisCount": true,
      "FailureDetectionPeriodBlockMinutes": 60,
      "RecoveryPeriodBlockSeconds": 3600,
      "RecoveryIgnoreHostnameFilters": [],
      "RecoverMasterClusterFilters": ["*"],
      "RecoverIntermediateMasterClusterFilters": ["*"],
      "OnFailureDetectionProcesses": [],
      "PreFailoverProcesses": [],
      "PostFailoverProcesses": [],
      "PostUnsuccessfulFailoverProcesses": [],
      "PostMasterFailoverProcesses": [],
      "PostIntermediateMasterFailoverProcesses": [],
      "CoMasterRecoveryMustPromoteOtherCoMaster": true,
      "DetachLostSlavesAfterMasterFailover": true,
      "ApplyMySQLPromotionAfterMasterFailover": true,
      "PreventCrossDataCenterMasterFailover": false,
      "PreventCrossRegionMasterFailover": false,
      "MasterFailoverLostInstancesDowntimeMinutes": 10,
      "MasterFailoverDetachReplicaMasterHost": false,
      "FailMasterPromotionIfSQLThreadNotUpToDate": true,
      "DelayMasterPromotionIfSQLThreadNotUpToDate": false,
      "PostponeReplicaRecoveryOnLagMinutes": 10,
      "OSCIgnoreHostnameFilters": [],
      "GraphiteAddr": "",
      "GraphitePath": "",
      "GraphiteConvertHostnameDotsToUnderscores": true
    }
