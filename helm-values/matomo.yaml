# Matomo Helm Values
# Chart: https://github.com/bitnami/charts/tree/main/bitnami/matomo
# Using existing MariaDB instance

fullnameOverride: matomo

# Use bitnamilegacy repository (Bitnami moved images here)
image:
  registry: docker.io
  repository: bitnamilegacy/matomo
  tag: latest

mariadb:
  enabled: false

# External database configuration (existing MariaDB)
externalDatabase:
  host: mariadb-primary.mariadb.svc.cluster.local
  port: 3306
  user: bluemayne
  existingSecret: mariadb-password
  database: MatomoDB

# Matomo admin credentials
auth:
  username: bluemayne
  existingSecret: matomo-admin-password
  existingSecretPasswordKey: admin-password

# Persistence
persistence:
  enabled: true
  size: 10Gi
  storageClass: local-path

# Resources
resources:
  requests:
    memory: "1Gi"
    cpu: "250m"
  limits:
    memory: "2Gi"
    cpu: "1000m"

# Readiness and Liveness probes
readinessProbe:
  enabled: true
  initialDelaySeconds: 60
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 5

livenessProbe:
  enabled: true
  initialDelaySeconds: 600
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 5

# Service
service:
  type: ClusterIP
  ports:
    http: 8080
    https: 8443

# Ingress (optional, configure as needed)
ingress:
  enabled: false
  # hostname: matomo.example.com
  # annotations:
  #   cert-manager.io/cluster-issuer: letsencrypt-prod